<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Queue System</title>
    <script>
        const scriptURL = "https://script.google.com/a/macros/shop24.nu/s/AKfycbyTqiaONibMiENgy4VPE_wge3V8PanwwnsXqLz7-e1ghQewhf6HAYN_rSx8XTkykbK6pg/exec?page=take-ticket"; // Replace with your Web App URL

        async function takeTicket() {
            let response = await fetch(scriptURL + "?action=takeTicket");
            let ticketNumber = await response.text();
            document.getElementById("ticket").innerText = "Your Ticket: " + ticketNumber;
        }

        async function callNext() {
            let response = await fetch(scriptURL + "?action=nextCustomer");
            let nextCustomer = await response.text();
            document.getElementById("calledCustomer").innerText = "Next: " + nextCustomer;
        }

        async function loadQueue() {
            let response = await fetch(scriptURL + "?action=getQueue");
            let queueData = await response.json();
            let queueList = document.getElementById("queueList");
            queueList.innerHTML = queueData.map(row => `<li>Ticket ${row[0]} - ${row[1]}</li>`).join("");
        }
    </script>
</head>
<body onload="loadQueue()">
    <h1>Queue System</h1>

    <h2>Customer</h2>
    <button onclick="takeTicket()">Take a Ticket</button>
    <p id="ticket"></p>

    <h2>Employee</h2>
    <button onclick="callNext()">Call Next</button>
    <p id="calledCustomer"></p>

    <h2>Queue Display</h2>
    <ul id="queueList"></ul>
</body>
</html>

